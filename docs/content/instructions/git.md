---
title: Git
weight: 3
prev: /instructions
sidebar:
    open: false
---

## Стратегия ветвления в Git

Этот документ описывает стратегию ветвления, которую следует использовать для разработки и поддержки проекта.

## Преднастройки

```Bash
git config --local user.name "Username"
git config --local user.email "Work Email"
```

## Стратегия ветвления
[Git Flow](https://www.gitkraken.com/learn/git/git-flow)
[Git Flow Setup](https://skoch.github.io/Git-Workflow/)

{{< zoomimg src="/instructions/assets/git-flow.svg" alt="Git flow" >}}

**Язык коммитов**: Английский

**Состав коммита**:

**Префикс**
1. **Тип коммита**
- [~] изменение
- [+] добавление
- [-] удаление
- [fix] fix

2. **Ссылка на задачу**
- [23]

**Тело**
Описание сути коммита (рекомендуется использование ассистентов в IDE)

**Постфикс**
- [skip tests]

## Типы веток

### Основные ветки
- **main**: Представляет собой состояние проекта, готовое к развертыванию в продакшн. Код в этой ветке всегда может быть развернут.
- **develop**: Основная ветка для непрерывной разработки. Ветки функций объединяются в эту ветку после завершения.

### Ветки поддержки
- **feature**: Используется для разработки новых функций. Ответвляется от `develop` и объединяется обратно в `develop` после завершения.
- **release**: Подготовка нового выпуска для продакшна. Ответвляется от `develop` для подготовки выпуска. Объединяется в `master` и `develop` после завершения.
- **hotfix**: Используется для быстрого устранения проблем в продакшне. Ответвляется от `master`, устраняет проблему и объединяется обратно в `master` и `develop`.

## Рабочий процесс

### Разработка функций
- Создайте ветку функции от `develop`: `git checkout -b feature/new-feature develop`
- Работайте над функцией, регулярно фиксируя изменения: `git commit -m "Реализована функция XYZ"`
- Отправьте ветку функции в удаленный репозиторий: `git push origin feature/new-feature`
- После завершения функции создайте запрос на объединение в `develop`

### Выпуск
- Создайте ветку выпуска от `develop`: `git checkout -b release/1.0.0 develop`
- Выполните необходимые действия для выпуска (тестирование, версионирование и т. д.)
- Объедините ветку выпуска в `master` и `develop`
- Пометьте выпуск: `git tag -a 1.0.0 -m "Выпуск 1.0.0"`
- Отправьте метки в удаленный репозиторий: `git push origin --tags`

### Хотфикс
- Создайте ветку хотфикса от `master`: `git checkout -b hotfix/1.0.1 master`
- Исправьте проблему
- Объедините ветку хотфикса в `master` и `develop`
- Пометьте хотфикс: `git tag -a 1.0.1 -m "Хотфикс 1.0.1"`
- Отправьте метки в удаленный репозиторий: `git push origin --tags`

## Политика объединения
- Все изменения кода должны проходить через запросы на объединение.
- Запросы на объединение требуют обзора и утверждения как минимум одним другим участником команды.
- Для веток функций разрешены только слияния с быстрым перемещением.
- Ветки выпуска и хотфиксов должны быть объединены с использованием флага `--no-ff` для сохранения истории ветвления.

## Непрерывная интеграция/непрерывное развертывание (CI/CD)
- Должны быть настроены конвейеры CI/CD для автоматической сборки, тестирования и развертывания изменений в соответствующие среды после успешного объединения запросов на объединение.

## Конвенции для сообщений коммитов
- Коммиты должны быть информативными и краткими, описывающими изменения.
- Рекомендуется использовать префиксы для коммитов, указывающие тип изменений (например, "feat" для новых функций, "fix" для исправлений и т. д.).
- Следует использовать повелительное наклонение в сообщениях коммитов.
- Сообщения коммитов должны быть написаны на английском языке.

## Примеры

### Пример ветвления для разработки функций

![Пример ветвления для разработки функций](instructions/assets/git-flow.svg)

### Пример ветвления для выпуска

![Пример ветвления для выпуска](instructions/assets/git-flow.svg)

### Пример ветвления для хотфикса

![Пример ветвления для хотфикса](instructions/assets/git-flow.svg)

## Заключение
Следуя этой стратегии ветвления, мы стремимся поддерживать чистый и стабильный код, облегчать сотрудничество среди участников команды и обеспечить упрощенный процесс выпуска.
